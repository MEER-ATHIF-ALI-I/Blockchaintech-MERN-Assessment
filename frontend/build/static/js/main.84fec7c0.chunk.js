(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{47:function(e,t,n){},48:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(20),c=n.n(r),s=(n(47),n(48),n(7)),o=n(3),i=n(5),u=n(9),l=n.n(u),j=n(13),d=n(14),b=n.n(d),h=n(38),p="SET_ALERT",O="REMOVE_ALERT",m="REGISTER_SUCCESS",f="REGISTER_FAIL",x="USER_LOADED",g="AUTH_ERROR",v="LOGIN_SUCCESS",y="LOGIN_FAIL",N="LOGOUT",w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function(a){var r=Object(h.v4)();a({type:p,payload:{msg:e,alertType:t,id:r}}),setTimeout((function(){return a({type:O,payload:r})}),n)}},A=function(e){e?b.a.defaults.headers.common["x-auth-token"]=e:delete b.a.defaults.headers.common["x-auth-token"]},S=function(){return function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&A(localStorage.token),e.prev=1,e.next=4,b.a.get("http://localhost:5000/users/auth");case 4:n=e.sent,t({type:x,payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:g});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},k=n(1),E=Object(i.b)((function(e){return{auth:e.auth}}),{logout:function(){return function(e){e({type:N})}}})((function(e){var t=e.auth,n=t.isAuthenticated,r=t.loading,c=e.logout,o=Object(k.jsxs)("ul",{className:"nav-links",children:[Object(k.jsx)("li",{children:Object(k.jsxs)(s.b,{to:"/dashboard",children:[Object(k.jsx)("i",{className:"fas fa-user"})," ",Object(k.jsx)("span",{className:"hide-sm",children:"Dashboard"})]})}),Object(k.jsx)("li",{children:Object(k.jsxs)(s.b,{onClick:c,to:"/",replace:!0,children:[Object(k.jsx)("i",{className:"fas fa-sign-out-alt"})," ",Object(k.jsx)("span",{className:"hide-sm",children:" \xa0Logout"})]})})]}),i=Object(k.jsxs)("ul",{className:"nav-links",children:[Object(k.jsx)("li",{children:Object(k.jsx)(s.b,{to:"/register",children:"Register"})}),Object(k.jsx)("li",{children:Object(k.jsx)(s.b,{to:"/login",children:"Login"})})]});return Object(k.jsxs)("nav",{className:"navbar bg-dark",children:[Object(k.jsx)("h1",{children:Object(k.jsx)(s.b,{to:"/",children:"HOME"})}),!r&&Object(k.jsx)(a.Fragment,{children:n?o:i})]})})),C=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}))((function(e){return e.isAuthenticated?Object(k.jsx)(o.a,{to:"/dashboard"}):Object(k.jsx)("section",{className:"landing",children:Object(k.jsx)("div",{className:"dark-overlay",children:Object(k.jsxs)("div",{className:"landing-inner",children:[Object(k.jsx)("h1",{children:"MERN Assessment"}),Object(k.jsx)("br",{}),Object(k.jsxs)("div",{className:"buttons",children:[Object(k.jsx)(s.b,{to:"/register",className:"btn",children:"Sign Up"}),Object(k.jsx)(s.b,{to:"/login",className:"btn",children:"Login"})]})]})})})})),L=n(16),R=n(4),T=n(22),I=Object(i.b)((function(e){return{alerts:e.alert}}))((function(e){var t=e.alerts;return null!==t&&t.length>0&&t.map((function(e){return Object(k.jsx)("div",{className:"alert alert-".concat(e.alertType),children:e.msg},e.id)}))})),U=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(){var n=Object(j.a)(l.a.mark((function n(a){var r,c,s,o;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({email:e,password:t}),n.prev=2,n.next=5,b.a.post("http://localhost:5000/users/auth",c,r);case 5:s=n.sent,a({type:v,payload:s.data}),a(S()),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(2),(o=n.t0.response.data.errors)&&o.forEach((function(e){return a(w(e.msg,"danger"))})),a({type:y});case 15:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.login,n=e.isAuthenticated,r=Object(a.useState)({email:"",password:""}),c=Object(T.a)(r,2),i=c[0],u=c[1],d=i.email,b=i.password,h=function(e){return u(Object(R.a)(Object(R.a)({},i),{},Object(L.a)({},e.target.name,e.target.value)))},p=function(){var e=Object(j.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t(d,b);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n?Object(k.jsx)(o.a,{to:"/dashboard"}):Object(k.jsxs)("div",{className:"login-form",children:[Object(k.jsx)("h1",{className:"heading",children:"Sign In"}),Object(k.jsxs)("p",{className:"lead",children:[Object(k.jsx)("i",{className:"fas fa-user"})," Sign Into Your Account"]}),Object(k.jsx)(I,{}),Object(k.jsx)("br",{}),Object(k.jsxs)("form",{className:"form",onSubmit:function(e){return p(e)},children:[Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"email",placeholder:"Email Address",name:"email",value:d,onChange:function(e){return h(e)},required:!0})}),Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"password",placeholder:"Password",name:"password",minLength:"6",value:b,onChange:function(e){return h(e)},required:!0})}),Object(k.jsx)("input",{type:"submit",className:"btn",value:"Login"})]}),Object(k.jsxs)("p",{className:"link",children:["Don't have an account? ",Object(k.jsx)(s.b,{to:"/register",children:"Sign Up"})]})]})})),_=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{setAlert:w,register:function(e){var t=e.name,n=e.email,a=e.password;return function(){var e=Object(j.a)(l.a.mark((function e(r){var c,s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={headers:{"Content-Type":"application/json"}},s=JSON.stringify({name:t,email:n,password:a}),e.prev=2,e.next=5,b.a.post("http://localhost:5000/users/",s,c);case 5:o=e.sent,r({type:m,payload:o.data}),r(S()),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),(i=e.t0.response.data.errors)&&i.forEach((function(e){return r(w(e.msg,"danger"))})),r({type:f});case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.setAlert,n=e.register,r=e.isAuthenticated,c=Object(a.useState)({name:"",email:"",password:"",password2:""}),i=Object(T.a)(c,2),u=i[0],d=i[1],b=u.name,h=u.email,p=u.password,O=u.password2,m=function(e){return d(Object(R.a)(Object(R.a)({},u),{},Object(L.a)({},e.target.name,e.target.value)))},f=function(){var e=Object(j.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Form data",a),a.preventDefault(),p!==O?t("Password do not match","danger"):n({name:b,email:h,password:p});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r?Object(k.jsx)(o.a,{to:"/dashboard"}):Object(k.jsxs)("div",{className:"register-form",children:[Object(k.jsx)("h1",{className:"heading",children:"Sign Up"}),Object(k.jsxs)("p",{className:"lead",children:[Object(k.jsx)("i",{className:"fas fa-user"})," Create Your Account"]}),Object(k.jsx)(I,{}),Object(k.jsx)("br",{}),Object(k.jsxs)("form",{className:"form",onSubmit:function(e){return f(e)},children:[Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"text",placeholder:"Name",name:"name",value:b,onChange:function(e){return m(e)}})}),Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"email",placeholder:"Email Address",name:"email",value:h,onChange:function(e){return m(e)}})}),Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"password",placeholder:"Password",name:"password",minLength:"6",value:p,onChange:function(e){return m(e)}})}),Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"password",placeholder:"Confirm Password",name:"password2",minLength:"6",value:O,onChange:function(e){return m(e)}})}),Object(k.jsx)("input",{type:"submit",className:"btn btn-primary",value:"Register"})]}),Object(k.jsxs)("p",{className:"link",children:["Already have an account? ",Object(k.jsx)(s.b,{to:"/login",children:"Sign In"})]})]})})),D=n(39),F=["component","auth"],G=Object(i.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,n=e.auth,a=n.isAuthenticated,r=n.loading,c=Object(D.a)(e,F);return Object(k.jsx)(o.b,Object(R.a)(Object(R.a)({},c),{},{render:function(e){return a||r?Object(k.jsx)(t,Object(R.a)({},e)):Object(k.jsx)(o.a,{to:"/login"})}}))}));var P=function(){return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("h1",{children:"Page not found"})})},J=Object(i.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.auth.user;return Object(k.jsx)("div",{style:{marginTop:"5rem",textAlign:"center"},children:Object(k.jsxs)("h1",{children:["Welcome, ",t&&t.name]})})})),M=n(17),q=n(40),H=n(41),W=n(42),Y=[],B={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null},V=Object(M.combineReducers)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case p:return[].concat(Object(W.a)(e),[a]);case O:return e.filter((function(e){return e.id!==a}));default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case x:return Object(R.a)(Object(R.a)({},e),{},{isAuthenticated:!0,loading:!1,user:a});case m:case v:return localStorage.setItem("token",a.token),Object(R.a)(Object(R.a)(Object(R.a)({},e),a),{},{isAuthenticated:!0,loading:!1});case f:case g:case y:case N:return localStorage.removeItem("token"),Object(R.a)(Object(R.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1});default:return e}}}),z=[H.a],K=Object(M.createStore)(V,{},Object(q.composeWithDevTools)(M.applyMiddleware.apply(void 0,z)));localStorage.token&&A(localStorage.token);var Q=function(){return Object(a.useEffect)((function(){K.dispatch(S())}),[]),Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("div",{className:"App",children:Object(k.jsxs)(s.a,{children:[Object(k.jsx)(E,{}),Object(k.jsxs)(o.d,{children:[Object(k.jsx)(o.b,{exact:!0,path:"/",component:C}),Object(k.jsx)(G,{exact:!0,path:"/dashboard",component:J}),Object(k.jsx)(o.b,{exact:!0,path:"/register",component:_}),Object(k.jsx)(o.b,{exact:!0,path:"/login",component:U}),Object(k.jsx)(o.b,{exact:!0,path:"",component:P})]})]})})})};c.a.render(Object(k.jsx)(i.a,{store:K,children:Object(k.jsx)(Q,{})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.84fec7c0.chunk.js.map